<!DOCTYPE html>
<html>

<body>
  <style type="text/css">
    body {
      background-color: rgb(255, 255, 255);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0;
      min-width: 100vw;
      min-height: 100vh;
    }

    canvas {
      border: 1px solid black;
    }
  </style>

  <canvas id="canvas" width="1080" height="720"></canvas>
  <script src="/node_modules/pathkit-wasm/bin/pathkit.js"></script>
  <script src="svgpath-all.js"></script>
  <script src="cubic2quad.js"></script>
  <script type="text/javascript" src="fabric.min.js"></script>
  <script type="text/javascript">
    'use strict';
    const MIN_ZOOM = 0.01;
    const MAX_ZOOM = 4000;

    (function () {
      var canvas = new fabric.Canvas('canvas');
      canvas.add(new fabric.Rect({ width: 50, height: 50, fill: 'blue', angle: 10 }))
      canvas.add(new fabric.Circle({ radius: 50, fill: 'red', top: 44, left: 80 }))
      canvas.add(new fabric.Ellipse({ rx: 50, ry: 10, fill: 'yellow', top: 80, left: 35 }))
      canvas.add(new fabric.Rect({ width: 50, height: 50, fill: 'purple', angle: -19, top: 70, left: 70 }))
      canvas.add(new fabric.Circle({ radius: 50, fill: 'green', top: 110, left: 30 }))
      canvas.add(new fabric.Ellipse({ rx: 50, ry: 10, fill: 'orange', top: 12, left: 100, angle: 30 }))
      canvas.on('mouse:wheel', function (opt) {
        var delta = opt.e.deltaY;
        var zoom = canvas.getZoom();
        zoom = zoom * Math.pow(2, delta * -0.01);
        // zoom *= 0.999 ** delta;
        if (zoom > MAX_ZOOM) zoom = MAX_ZOOM;
        if (zoom < MIN_ZOOM) zoom = MIN_ZOOM;
        window.document.title = `Zoom ${Math.ceil(zoom * 100)}%`;
        canvas.zoomToPoint({ x: opt.e.offsetX, y: opt.e.offsetY }, zoom);
        opt.e.preventDefault();
        opt.e.stopPropagation();
      });

      canvas.on('mouse:down', function (opt) {
        var evt = opt.e;
        if (evt.altKey === true) {
          this.isDragging = true;
          this.selection = false;
          this.lastPosX = evt.clientX;
          this.lastPosY = evt.clientY;
        }
      });

      canvas.on('mouse:move', function (opt) {
        if (this.isDragging) {
          var e = opt.e;
          var vpt = this.viewportTransform;
          vpt[4] += e.clientX - this.lastPosX;
          vpt[5] += e.clientY - this.lastPosY;
          this.requestRenderAll();
          this.lastPosX = e.clientX;
          this.lastPosY = e.clientY;
        }
      });

      canvas.on('mouse:up', function (opt) {
        this.setViewportTransform(this.viewportTransform);
        this.isDragging = false;
        this.selection = true;
      });
    })()

  </script>
</body>

</html>